;; Palette definitions:
to-report palette-viridis
  report [[68 1 84][68 2 85][68 3 86][68 4 87][68 6 88][68 7 89][68 8 90][69 9 91][69 10 92][69 11 93][69 12 94][69 13 95][69 15 96][69 16 97][69 17 98][69 18 99][69 19 100][69 20 101][69 21 102][70 23 103][70 24 104][70 25 105][70 26 106][70 27 107][70 28 108][70 29 109][70 30 110][70 32 111][70 33 112][70 34 113][70 35 114][70 36 115][71 37 116][71 38 117][71 39 118][71 41 119][71 42 120][71 43 121][71 44 122][71 44 122][71 45 122][70 46 123][70 47 123][70 48 124][69 49 124][69 50 125][69 51 125][68 52 126][68 54 126][68 55 127][67 56 127][67 57 128][67 58 128][66 59 129][66 60 129][66 61 130][65 62 130][65 63 131][64 64 131][64 65 132][64 66 132][63 67 133][63 68 133][63 69 134][62 70 134][62 71 135][62 73 135][61 74 136][61 75 136][61 76 137][60 77 137][60 78 138][60 79 138][59 80 139][59 81 139][59 81 139][59 82 139][58 83 139][58 84 139][57 84 139][57 85 139][57 86 139][56 87 140][56 88 140][55 89 140][55 89 140][55 90 140][54 91 140][54 92 140][53 93 140][53 94 140][53 94 140][52 95 140][52 96 140][52 97 141][51 98 141][51 99 141][50 100 141][50 100 141][50 101 141][49 102 141][49 103 141][48 104 141][48 105 141][48 105 141][47 106 141][47 107 141][46 108 142][46 109 142][46 110 142][45 110 142][45 111 142][44 112 142][44 113 142][44 113 142][44 114 142][43 115 142][43 116 142][43 117 142][42 117 142][42 118 142][42 119 142][41 120 142][41 121 142][41 122 142][41 123 142][40 124 142][40 125 142][40 125 142][39 126 142][39 127 142][39 128 142][38 129 141][38 130 141][38 131 141][37 132 141][37 132 141][37 133 141][36 134 141][36 135 141][36 136 141][36 137 141][35 138 141][35 139 141][35 140 141][34 140 141][34 141 141][34 142 141][33 143 141][33 144 141][33 144 141][33 145 141][33 146 140][33 146 140][34 147 140][34 148 139][34 149 139][34 149 139][34 150 138][34 151 138][35 152 138][35 152 138][35 153 137][35 154 137][35 155 137][35 155 136][36 156 136][36 157 136][36 158 135][36 159 135][36 159 135][36 160 134][36 161 134][37 162 134][37 162 133][37 163 133][37 164 133][37 165 132][37 165 132][38 166 132][38 167 132][38 168 131][38 168 131][38 169 131][38 170 130][39 171 130][39 171 130][39 172 129][39 173 129][39 173 129][41 174 128][42 175 127][44 175 126][45 176 126][47 177 125][48 178 124][50 178 123][51 179 122][53 180 121][54 181 120][56 181 120][57 182 119][59 183 118][60 184 117][62 185 116][63 185 115][65 186 114][66 187 114][68 188 113][69 188 112][71 189 111][72 190 110][74 191 109][75 192 108][77 192 108][78 193 107][80 194 106][81 195 105][83 195 104][84 196 103][86 197 102][87 198 102][89 198 101][90 199 100][92 200 99][92 200 99][94 201 98][96 201 96][98 202 95][100 202 94][102 203 93][104 203 91][106 204 90][108 204 89][110 205 87][113 205 86][115 206 85][117 206 84][119 207 82][121 207 81][123 208 80][125 208 78][127 209 77][129 209 76][131 210 75][133 211 73][135 211 72][137 212 71][139 212 69][141 213 68][143 213 67][145 214 65][147 214 64][149 215 63][152 215 62][154 216 60][156 216 59][158 217 58][160 217 56][162 218 55][164 218 54][166 219 53][168 219 51][170 220 50][170 220 50][172 220 50][175 221 49][177 221 49][179 221 49][182 222 48][184 222 48][187 222 47][189 223 47][191 223 47][194 223 46][196 223 46][198 224 46][201 224 45][203 224 45][206 225 44][208 225 44][210 225 44][213 226 43][215 226 43][217 226 43][220 227 42][222 227 42][225 227 41][227 228 41][229 228 41][232 228 40][234 228 40][236 229 40][239 229 39][241 229 39][244 230 38][246 230 38][248 230 38][251 231 37][253 231 37]]
end
to-report palette-magma
  report [[0 0 4][1 0 6][1 1 7][2 1 9][3 2 11][4 2 12][4 3 14][5 3 16][6 3 17][7 4 19][7 4 21][8 5 23][9 5 24][10 5 26][10 6 28][11 6 29][12 7 31][13 7 33][13 8 34][14 8 36][15 8 38][15 9 39][16 9 41][17 10 43][18 10 44][18 11 46][19 11 48][20 11 49][21 12 51][21 12 53][22 13 55][23 13 56][24 13 58][24 14 60][25 14 61][26 15 63][27 15 65][27 16 66][28 16 68][28 16 68][29 16 70][31 16 71][32 16 73][34 16 74][35 16 76][37 16 77][38 16 79][40 16 81][41 17 82][43 17 84][44 17 85][45 17 87][47 17 88][48 17 90][50 17 92][51 17 93][53 17 95][54 17 96][56 17 98][57 17 99][59 17 101][60 17 103][62 17 104][63 17 106][64 17 107][66 17 109][67 18 110][69 18 112][70 18 114][72 18 115][73 18 117][75 18 118][76 18 120][78 18 121][79 18 123][79 18 123][80 19 123][82 19 123][83 20 123][84 20 124][86 21 124][87 21 124][88 22 124][90 22 124][91 23 124][92 23 125][93 24 125][95 24 125][96 25 125][97 25 125][99 26 125][100 26 126][101 27 126][103 27 126][104 28 126][105 28 126][107 29 126][108 29 126][109 30 127][111 30 127][112 31 127][113 31 127][115 32 127][116 32 127][117 33 128][118 33 128][120 34 128][121 34 128][122 35 128][124 35 128][125 36 129][126 36 129][128 37 129][129 37 129][129 37 129][130 37 129][132 38 129][133 38 128][135 39 128][136 39 128][138 40 128][139 40 128][141 41 127][142 41 127][144 42 127][145 42 127][147 43 127][148 43 126][150 44 126][151 44 126][153 45 126][154 45 126][156 46 125][157 46 125][159 47 125][160 47 125][162 48 125][163 48 124][165 49 124][166 49 124][168 50 124][169 50 124][171 51 123][172 51 123][174 52 123][175 52 123][177 53 123][178 53 122][180 54 122][181 54 122][181 54 122][182 55 121][184 55 121][185 56 120][186 57 120][187 57 119][189 58 119][190 59 118][191 59 117][192 60 117][194 61 116][195 62 116][196 62 115][197 63 114][199 64 114][200 64 113][201 65 113][202 66 112][204 66 112][205 67 111][206 68 110][208 68 110][209 69 109][210 70 109][211 70 108][213 71 108][214 72 107][215 72 106][216 73 106][218 74 105][219 75 105][220 75 104][221 76 103][223 77 103][224 77 102][225 78 102][226 79 101][228 79 101][229 80 100][229 80 100][230 82 100][230 83 100][231 85 100][232 86 100][232 88 100][233 89 99][233 91 99][234 93 99][235 94 99][235 96 99][236 97 99][237 99 99][237 100 99][238 102 99][238 104 99][239 105 99][240 107 99][240 108 98][241 110 98][242 111 98][242 113 98][243 115 98][243 116 98][244 118 98][245 119 98][245 121 98][246 122 98][247 124 98][247 126 98][248 127 97][248 129 97][249 130 97][250 132 97][250 133 97][251 135 97][251 135 97][251 137 98][251 138 99][251 140 100][251 141 101][251 143 102][251 144 103][252 146 104][252 147 105][252 149 106][252 151 107][252 152 108][252 154 109][252 155 110][252 157 111][252 158 112][252 160 113][252 161 114][252 163 115][253 165 116][253 166 117][253 168 118][253 169 119][253 171 120][253 172 121][253 174 122][253 175 123][253 177 124][253 178 125][253 180 126][253 182 127][253 183 128][254 185 129][254 186 130][254 188 131][254 189 132][254 191 133][254 192 134][254 194 135][254 194 135][254 196 137][254 197 138][254 199 140][254 201 141][254 202 143][254 204 145][254 206 146][254 207 148][253 209 149][253 211 151][253 213 153][253 214 154][253 216 156][253 218 157][253 219 159][253 221 161][253 223 162][253 224 164][253 226 165][253 228 167][253 229 169][253 231 170][253 233 172][253 234 173][253 236 175][253 238 177][252 240 178][252 241 180][252 243 181][252 245 183][252 246 185][252 248 186][252 250 188][252 251 189][252 253 191]]
end
to-report palette-plasma
  report [[13 8 135][15 8 136][16 8 136][18 8 137][20 7 138][21 7 138][23 7 139][24 7 140][26 7 140][28 7 141][29 7 142][31 7 143][33 6 143][34 6 144][36 6 145][37 6 145][39 6 146][41 6 147][42 6 147][44 6 148][46 5 149][47 5 149][49 5 150][51 5 151][52 5 151][54 5 152][55 5 153][57 4 153][59 4 154][60 4 155][62 4 156][64 4 156][65 4 157][67 4 158][68 4 158][70 3 159][72 3 160][73 3 160][75 3 161][75 3 161][76 3 161][78 3 161][79 3 162][81 3 162][82 3 162][84 3 162][85 3 162][86 3 163][88 3 163][89 3 163][91 3 163][92 3 163][94 3 164][95 3 164][96 3 164][98 3 164][99 3 164][101 3 165][102 3 165][104 3 165][105 3 165][106 3 165][108 3 166][109 3 166][111 3 166][112 3 166][114 3 166][115 3 167][116 3 167][118 3 167][119 3 167][121 3 167][122 3 168][124 3 168][125 3 168][125 3 168][126 4 168][127 5 167][128 5 167][130 6 166][131 7 166][132 8 165][133 9 165][134 10 164][135 10 164][136 11 163][137 12 163][139 13 162][140 14 162][141 14 161][142 15 161][143 16 160][144 17 160][145 18 159][147 19 159][148 19 159][149 20 158][150 21 158][151 22 157][152 23 157][153 23 156][154 24 156][156 25 155][157 26 155][158 27 154][159 27 154][160 28 153][161 29 153][162 30 152][163 31 152][165 32 151][166 32 151][167 33 150][168 34 150][168 34 150][169 35 149][170 36 148][171 37 148][172 38 147][173 39 146][174 40 145][175 41 144][176 42 143][177 43 143][178 44 142][179 45 141][180 46 140][181 47 139][182 48 138][183 49 138][184 50 137][185 51 136][186 53 135][187 54 134][188 55 133][189 56 133][190 57 132][191 58 131][192 59 130][193 60 129][194 61 128][195 62 128][196 63 127][197 64 126][198 65 125][199 66 124][200 67 123][201 68 123][202 69 122][203 70 121][203 70 121][204 71 120][204 72 120][205 73 119][206 74 118][206 75 117][207 76 117][208 77 116][208 78 115][209 79 114][210 80 114][211 81 113][211 82 112][212 83 111][213 84 111][213 85 110][214 86 109][215 87 108][215 88 108][216 89 107][217 89 106][217 90 106][218 91 105][219 92 104][219 93 103][220 94 103][221 95 102][221 96 101][222 97 100][223 98 100][224 99 99][224 100 98][225 101 97][226 102 97][226 103 96][227 104 95][228 105 94][228 106 94][229 107 93][229 107 93][230 108 92][230 109 91][231 111 91][231 112 90][232 113 89][232 114 88][233 115 87][233 116 87][234 118 86][234 119 85][235 120 84][236 121 83][236 122 83][237 123 82][237 125 81][238 126 80][238 127 79][239 128 79][239 129 78][240 130 77][240 132 76][241 133 75][241 134 75][242 135 74][243 136 73][243 137 72][244 139 71][244 140 71][245 141 70][245 142 69][246 143 68][246 144 67][247 146 67][247 147 66][248 148 65][248 148 65][248 149 64][248 150 64][248 152 63][249 153 62][249 154 62][249 155 61][249 157 60][249 158 60][249 159 59][249 160 58][249 162 58][250 163 57][250 164 56][250 165 56][250 167 55][250 168 54][250 169 54][250 170 53][251 172 53][251 173 52][251 174 51][251 175 51][251 176 50][251 178 49][251 179 49][251 180 48][252 181 47][252 183 47][252 184 46][252 185 45][252 186 45][252 188 44][252 189 43][252 190 43][253 191 42][253 193 41][253 194 41][253 195 40][253 195 40][253 197 40][252 198 40][252 200 39][252 201 39][251 203 39][251 204 39][250 206 39][250 207 38][250 209 38][249 210 38][249 212 38][249 214 38][248 215 37][248 217 37][247 218 37][247 220 37][247 221 37][246 223 36][246 224 36][246 226 36][245 227 36][245 229 36][244 230 35][244 232 35][244 234 35][243 235 35][243 237 35][243 238 34][242 240 34][242 241 34][241 243 34][241 244 34][241 246 33][240 247 33][240 249 33]]
end
to-report palette-inferno
  report [[0 0 4][1 0 6][2 1 8][2 1 9][3 1 11][4 2 13][5 2 15][6 2 17][7 3 18][7 3 20][8 3 22][9 3 24][10 4 25][11 4 27][11 4 29][12 5 31][13 5 33][14 5 34][15 6 36][16 6 38][16 6 40][17 7 42][18 7 43][19 7 45][20 8 47][20 8 49][21 8 51][22 9 52][23 9 54][24 9 56][24 9 58][25 10 59][26 10 61][27 10 63][28 11 65][29 11 67][29 11 68][30 12 70][31 12 72][31 12 72][33 12 73][34 12 74][36 12 75][37 12 76][39 12 77][40 13 78][42 13 79][43 13 80][45 13 82][46 13 83][48 13 84][50 13 85][51 13 86][53 13 87][54 13 88][56 13 89][57 13 90][59 14 91][60 14 92][62 14 93][63 14 94][65 14 95][66 14 96][68 14 97][70 14 98][71 14 99][73 14 101][74 14 102][76 14 103][77 15 104][79 15 105][80 15 106][82 15 107][83 15 108][85 15 109][85 15 109][86 16 109][88 16 109][89 17 109][90 17 109][92 18 109][93 18 109][94 19 108][96 19 108][97 20 108][98 20 108][100 21 108][101 21 108][102 22 108][104 22 108][105 23 108][106 23 108][108 24 108][109 24 108][111 25 108][112 25 107][113 26 107][115 26 107][116 27 107][117 27 107][119 28 107][120 28 107][121 29 107][123 29 107][124 30 107][125 30 107][127 31 107][128 31 106][129 32 106][131 32 106][132 33 106][133 33 106][135 34 106][136 34 106][136 34 106][137 35 105][139 35 105][140 36 104][142 36 104][143 37 103][145 37 102][146 38 102][147 39 101][149 39 101][150 40 100][152 40 99][153 41 99][155 41 98][156 42 98][157 43 97][159 43 96][160 44 96][162 44 95][163 45 95][165 45 94][166 46 93][167 47 93][169 47 92][170 48 92][172 48 91][173 49 90][175 49 90][176 50 89][177 51 89][179 51 88][180 52 87][182 52 87][183 53 86][185 53 86][186 54 85][186 54 85][187 55 84][188 56 83][189 57 82][190 58 81][191 59 81][192 60 80][194 60 79][195 61 78][196 62 77][197 63 76][198 64 75][199 65 74][200 66 73][201 67 72][202 68 72][203 69 71][204 70 70][205 71 69][207 72 68][208 72 67][209 73 66][210 74 65][211 75 64][212 76 64][213 77 63][214 78 62][215 79 61][216 80 60][217 81 59][218 82 58][219 83 57][221 83 56][222 84 55][223 85 55][224 86 54][225 87 53][226 88 52][227 89 51][227 89 51][228 90 50][228 92 49][229 93 47][230 95 46][230 96 45][231 98 44][231 99 43][232 101 42][233 102 40][233 104 39][234 105 38][235 106 37][235 108 36][236 109 35][236 111 33][237 112 32][238 114 31][238 115 30][239 117 29][240 118 28][240 120 26][241 121 25][241 123 24][242 124 23][243 125 22][243 127 21][244 128 19][245 130 18][245 131 17][246 133 16][246 134 15][247 136 14][248 137 12][248 139 11][249 140 10][249 140 10][249 142 11][249 143 12][249 145 13][249 146 14][249 148 15][249 150 16][249 151 17][249 153 18][249 154 19][249 156 21][249 158 22][249 159 23][249 161 24][249 162 25][249 164 26][249 166 27][249 167 28][249 169 29][249 171 30][249 172 31][249 174 32][249 175 33][249 177 34][249 179 35][249 180 36][249 182 37][249 183 38][249 185 39][249 187 41][249 188 42][249 190 43][249 191 44][249 193 45][249 195 46][249 196 47][249 198 48][249 199 49][249 201 50][249 201 50][249 203 53][249 204 57][249 206 60][249 207 63][249 209 66][250 210 70][250 212 73][250 213 76][250 215 79][250 216 83][250 218 86][250 220 89][250 221 92][250 223 96][250 224 99][250 226 102][250 227 105][251 229 109][251 230 112][251 232 115][251 233 118][251 235 122][251 236 125][251 238 128][251 240 131][251 241 135][251 243 138][251 244 141][251 246 144][252 247 148][252 249 151][252 250 154][252 252 157][252 253 161][252 255 164]]
end

;; scale-color-viridis
;; Works similar to the NetLogo primitive scale-color
;; Can be called within a ask turtles/patches to get colors reported, depending on a specific variable
;; Extreme values for these variable have to be provided!
to-report scale-colormap [palette var minvar maxvar]
  ;; Rescale the variable to 0..300
  ;;The transformation works as follows:
  ; NewValue = (((OldValue - OldMin) * (NewMax - NewMin)) / (OldMax - OldMin)) + NewMin
  report item floor(((var - minvar) * (length(run-result (word "palette-" palette)) - 1)) / (maxvar - minvar)) run-result (word "palette-" palette)
end

;; color-viridis
;; Reports a specific item from the viridis color scale
to-report colormap [palette palette_index]
  ;; Scale a variable to the length of the palette:
  let pal_viridis palette-viridis

  ;; Check vir_i:
  ifelse (palette_index >= length(run-result (word "palette-" palette)))
  [
    print (word "viridis color index invalid. Index maximum = " (length(run-result (word "palette-" palette)) - 1))
    report item 0 run-result (word "palette-" palette)
  ]
  [
    report item palette_index run-result (word "palette-" palette)
  ]
end

